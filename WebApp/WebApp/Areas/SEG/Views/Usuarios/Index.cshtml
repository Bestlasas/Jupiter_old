@model IEnumerable<WebApp.Models.EmptyClass>
@{
	var viewName = System.IO.Path.GetFileNameWithoutExtension(Path);
}

<div id="@viewName">
	<!-- Scripts -->
	<script src="@Url.Content(App.Utils.Utils.GetJsFilePath(Path))"></script>
	<!-- Plantilla que se utilizará en la columna de acciones de la grilla -->
	<script id="actionTemplate" type="text/x-kendo-template">
		<div class='text-center'>
			<a class='btn btn-primary'  href='@Url.Action("ActualizarUsuario", "Usuarios", new { area = "SEG" })/#=data.Id#'>Editar</a>
			<button type="button" onclick="Index.eliminar(event)" class="btn btn-danger">Eliminar</button>
		</div>
	</script>

	<div class="page-header">
		<h3><i class="fa fa-gear page-header-icon"></i>&nbsp;&nbsp;Usuarios</h3>
	</div>
	<div class="container-fluid">


		<div class="card">

			<div class="card-header">
				Listado de usuarios del sistema.
				<label class="float-right mt-2 mb-0">
					@Html.ActionLink("Registrar", "InsEstadoAfiliacion", "Afiliaciones", null, new { @class = "btn btn-primary float-right", @data_modal = "" })
				</label>
			</div>
			<div class="card-block">
				@(Html.Kendo().Grid<UsuarioIdentity>()
					.Name("grid")
					.Columns(columns =>
					{
						columns.Bound(p => p.Id).Hidden();
						columns.Bound(p => p.Username).Title("Usuario");
						columns.Bound(p => p.Documento).Title("Documento");
						columns.Bound(p => p.PrimerNombre).Title("Primer nombre");
						columns.Bound(p => p.PrimerApellido).Title("Primer apellido");
						columns.Bound(c => c.Id).ClientTemplate("#=Index.actionTemplate(data)#").Title("Acciones").Width(230).Filterable(false);
					})
					.Pageable()
					.Sortable()
					.Filterable(ftb => ftb.Mode(GridFilterMode.Row))
					.Scrollable()
					.DataSource(dataSource => dataSource
						.Ajax()
						.Read(read => read.Action("GetListUsuarios", "Usuarios"))
					)
				)
			</div>
		</div>

	</div>
	<!-- Inicializadores -->
	<script>
        $(function () {
            @(viewName).init();
        });

	</script>
</div>
